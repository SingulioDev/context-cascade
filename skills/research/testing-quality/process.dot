digraph TestingQuality {
    rankdir=TB;
    compound=true;
    node [shape=box, style=filled, fontname="Arial"];

    start [shape=ellipse, label="Start:\nQuality Audit", fillcolor=lightgreen];
    end [shape=ellipse, label="Complete:\nQuality Report", fillcolor=green, fontcolor=white];

    subgraph cluster_phase0 {
        label="Phase 0: Expertise Loading";
        fillcolor=lightyellow;
        style=filled;
        p0 [label="Load Quality\nMetrics"];
    }

    subgraph cluster_analysis {
        label="Analysis Phase";
        fillcolor=lightblue;
        style=filled;
        a1 [label="Coverage\nAnalysis"];
        a2 [label="Health\nAssessment"];
        a3 [label="Anti-pattern\nDetection"];
        a1 -> a2 -> a3;
    }

    subgraph cluster_report {
        label="Report Phase";
        fillcolor=lightcoral;
        style=filled;
        r1 [label="Generate\nReport"];
        r2 [label="Recommendations"];
        r1 -> r2;
    }

    eval [shape=octagon, label="Quality\nGate", fillcolor=orange];

    start -> p0;
    p0 -> a1;
    a3 -> r1;
    r2 -> eval;
    eval -> end [label="pass", color=green];
    eval -> a1 [label="fail", color=red, style=dashed];

    labelloc="t";
    label="Testing Quality: Assessment (v2.1)";
    fontsize=16;
}
