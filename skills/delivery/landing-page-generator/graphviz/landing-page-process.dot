digraph LandingPageGenerator {
    rankdir=TB;
    compound=true;
    node [shape=box, style=filled, fontname="Arial"];

    // Start and End
    start [shape=ellipse, label="Product\nBrief", fillcolor="#90EE90"];
    end [shape=ellipse, label="Live\nURL", fillcolor="#228B22", fontcolor=white];

    // Phase 0
    subgraph cluster_phase0 {
        label="Phase 0: Expertise";
        style=filled;
        fillcolor="#FFFACD";
        p0 [label="Load Domain\nExpertise\n(marketing.yaml)", fillcolor="#FFFFE0"];
    }

    // Phase 1
    subgraph cluster_phase1 {
        label="Phase 1: Research (15-30 min)";
        style=filled;
        fillcolor="#ADD8E6";
        p1_research [label="AI Research\nBest Practices\n[researcher]", fillcolor="#87CEEB"];
        p1_output [label="Playbook\nArtifact", shape=note, fillcolor=white];
        p1_research -> p1_output;
    }

    // Phase 2
    subgraph cluster_phase2 {
        label="Phase 2: Copy (20-40 min)";
        style=filled;
        fillcolor="#FFFFE0";
        p2_copy [label="AI Copywriting\n+ Product Brief\n[content-writer]", fillcolor="#FFD700"];
        p2_review [label="USER\nCHECKPOINT", shape=diamond, fillcolor="#FF6347", fontcolor=white];
        p2_output [label="Copy\nArtifact", shape=note, fillcolor=white];
        p2_copy -> p2_review;
        p2_review -> p2_output [label="approved"];
    }

    // Phase 3
    subgraph cluster_phase3 {
        label="Phase 3: Inspiration (10-20 min)";
        style=filled;
        fillcolor="#FFA07A";
        p3a [label="Firecrawl\nBranding Extract\n[researcher]", fillcolor="#FF8C00"];
        p3b [label="Puppeteer\nScreenshot\n[frontend-dev]", fillcolor="#FF8C00"];
        p3_output [label="branding.json\n+ screenshot.png", shape=note, fillcolor=white];
        p3a -> p3_output;
        p3b -> p3_output;
    }

    // Phase 4
    subgraph cluster_phase4 {
        label="Phase 4: Build (30-60 min)";
        style=filled;
        fillcolor="#FFB6C1";
        p4_build [label="AI Code Gen\nHTML/CSS/JS\n[coder]", fillcolor="#FF69B4"];
        p4_model [label="Opus 4.5\n+ Extended\nThinking", shape=octagon, fillcolor="#DDA0DD"];
        p4_output [label="index.html\nArtifact", shape=note, fillcolor=white];
        p4_model -> p4_build [style=dashed];
        p4_build -> p4_output;
    }

    // Phase 5
    subgraph cluster_phase5 {
        label="Phase 5: Iterate (Variable)";
        style=filled;
        fillcolor="#E6E6FA";
        p5_iterate [label="Refinements\n1-2 in chat\n[coder]", fillcolor="#9370DB"];
        p5_cursor [label="Cursor IDE\n3+ iterations\n[external]", fillcolor="#8A2BE2", fontcolor=white];
        p5_iterate -> p5_cursor [label="context\nfull", style=dashed];
        p5_cursor -> p5_iterate [label="refine", style=dashed];
    }

    // Phase 6
    subgraph cluster_phase6 {
        label="Phase 6: Deploy (15-30 min)";
        style=filled;
        fillcolor="#90EE90";
        p6_deploy [label="Netlify CLI\nDeployment\n[cicd-engineer]", fillcolor="#32CD32"];
        p6_config [label="Domain\nSetup", shape=octagon, fillcolor="#98FB98"];
        p6_config -> p6_deploy [style=dashed];
    }

    // Flow connections
    start -> p0;
    p0 -> p1_research;
    p1_output -> p2_copy;
    p2_output -> p3a;
    p2_output -> p3b;
    p3_output -> p4_build;
    p4_output -> p5_iterate;
    p5_iterate -> p6_deploy;
    p6_deploy -> end;

    // Feedback loops
    p2_review -> p2_copy [label="revise", style=dashed, color=red];

    // Legend
    subgraph cluster_legend {
        label="Legend";
        style=filled;
        fillcolor="#F5F5F5";
        rankdir=LR;
        l1 [label="Agent Task", fillcolor="#87CEEB", shape=box];
        l2 [label="Output Artifact", fillcolor=white, shape=note];
        l3 [label="User Checkpoint", fillcolor="#FF6347", fontcolor=white, shape=diamond];
        l4 [label="External Tool", fillcolor="#8A2BE2", fontcolor=white];
        l1 -> l2 -> l3 -> l4 [style=invis];
    }

    // Metadata
    labelloc="t";
    label="Landing Page Generator: 6-Phase SOP (v1.0.0)\nResearch -> Copy -> Inspiration -> Build -> Iterate -> Deploy";
    fontsize=16;
    fontname="Arial Bold";
}
